{% extends 'frontend/base.html' %}
{% load static %}

{% block title %}Resume Management - Craftivo{% endblock %}

{% block content %}
<section id="resume-management" class="resume-management section">
  <div class="container">
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}

    <div class="section-title">
      <span class="subtitle">Management</span>
      <h2>Resume Management</h2>
      <p>Manage your education and professional experience details.</p>
    </div>

    <div class="row">
      <!-- Education Section -->
      <div class="col-lg-6">
        <div class="management-card">
          <h3>Add Education</h3>
          <form method="post">
            {% csrf_token %}
            {{ education_form.as_p }}
            <button type="submit" name="add_education" class="btn btn-primary">Add Education</button>
          </form>
        </div>

        <div class="management-card">
          <h3>Existing Educations</h3>
          {% for education in educations %}
            <div class="item-card">
              <div class="item-content">
                <h4>{{ education.degree }}</h4>
                <p>{{ education.institution }} - {{ education.year_range }}</p>
                <span>{{ education.degree_level }}</span>
              </div>
              <form method="post" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="education_id" value="{{ education.id }}">
                <button type="submit" name="delete_education" class="btn btn-danger btn-sm">Delete</button>
              </form>
            </div>
          {% empty %}
            <p>No educations added yet.</p>
          {% endfor %}
        </div>
      </div>

      <!-- Experience Section -->
      <div class="col-lg-6">
        <div class="management-card">
          <h3>Add Experience</h3>
          <form method="post">
            {% csrf_token %}
            {{ experience_form.as_p }}
            <button type="submit" name="add_experience" class="btn btn-primary">Add Experience</button>
          </form>
        </div>

        <div class="management-card">
          <h3>Existing Experiences</h3>
          {% for experience in experiences %}
            <div class="item-card">
              <div class="item-content">
                <h4>{{ experience.position }}</h4>
                <p>{{ experience.company }} - {{ experience.duration }}</p>
                <p>{{ experience.description }}</p>
              </div>
              <form method="post" style="display: inline;">
                {% csrf_token %}
                <input type="hidden" name="experience_id" value="{{ experience.id }}">
                <button type="submit" name="delete_experience" class="btn btn-danger btn-sm">Delete</button>
              </form>
            </div>
          {% empty %}
            <p>No experiences added yet.</p>
          {% endfor %}
        </div>
      </div>
    </div>

    <div class="text-center mt-4">
      <a href="{% url 'index' %}" class="btn btn-secondary">Back to Portfolio</a>
    </div>
  </div>
</section>

<style>
  .management-card {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }

  .management-card h3 {
    margin-bottom: 15px;
    color: #333;
  }

  .item-card {
    background: #ffffff;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 1px 5px rgba(0,0,0,0.1);
  }

  .item-content h4 {
    margin: 0 0 5px 0;
    color: #333;
  }

  .item-content p {
    margin: 0;
    color: #666;
  }

  .item-content span {
    font-style: italic;
    color: #999;
  }

  .btn-sm {
    padding: 5px 10px;
    font-size: 12px;
  }
</style>
{% endblock %}